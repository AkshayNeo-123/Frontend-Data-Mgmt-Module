<div class="container for-margin py-4 mb-5">
  <h4 class="fw-bold mb-3">Users</h4>


  <div class="d-flex justify-content-between align-items-center mb-3 flex-wrap">

    <mat-form-field appearance="outline" class="search-field">
      <mat-label>Search by Name</mat-label>
      <input matInput (keyup)="applyFilter($event)" placeholder="Search users">
    </mat-form-field>

    <button class="mr-3 add-user-btn me-4" (click)="openAddUserDialog()">
      <i class="fas fa-plus me-2"></i> Add New User
    </button>

  </div>


  <div class="table-responsive">
    <table mat-table [dataSource]="dataSource" matSort matSortStart="desc" matSortDisableClear="true"
      disableClear="true" class="table table-bordered table-striped table-hover">
      <ng-container matColumnDef="userId">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Users ID</th>
        <td mat-cell *matCellDef="let user">{{ getFormattedUserId(user.userId) }}</td>
      </ng-container>

      <ng-container matColumnDef="userName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Name</th>
        <td mat-cell *matCellDef="let user">
          {{ user.firstName }} {{ user.lastName }}
        </td>
      </ng-container>


      <ng-container matColumnDef="roleId">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Role</th>
        <td mat-cell *matCellDef="let user">{{ user.role.roleName }}</td>
      </ng-container>


      <ng-container matColumnDef="status">
        <th mat-header-cell *matHeaderCellDef>Status</th>
        <td mat-cell *matCellDef="let user">{{ user.status }}</td>
      </ng-container>


      <ng-container matColumnDef="actions">
        <th mat-header-cell *matHeaderCellDef>Actions</th>
        <td mat-cell *matCellDef="let user">
          <i class="fas fa-pencil-alt me-3 action-icon" (click)="editUser(user)"></i>
          <i class="fas fa-trash-alt action-icon text-danger" (click)="deleteUser(user.userId)"></i>
        </td>
      </ng-container>


      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>

      <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
    </table>
  </div>

  <mat-paginator [pageSizeOptions]="[5, 10, 20]" showFirstLastButtons></mat-paginator>
</div>