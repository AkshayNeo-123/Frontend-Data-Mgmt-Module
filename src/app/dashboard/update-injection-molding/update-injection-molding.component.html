<div class="for-margin px-3 py-3 ">
  <h2 mat-dialog-title>Injection Moulding</h2>
  <mat-hint class="global-hint mb-3">All fields marked with an asterisk (*) are required</mat-hint>

  <form [formGroup]="injectionForm" (ngSubmit)="onSubmit()" style="margin-bottom: 50px;">

    <div class="row align-items-center" style="height: 56px;">
      <!-- Project ID (Multi-select) -->
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Project ID</mat-label>
        <mat-select formControlName="projectId" multiple>
          <mat-option *ngFor="let project of projects" [value]="project.projectNumber">
            {{ project.projectNumber }}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" class="half-width">
        <mat-label>Recipe Number</mat-label>
        <input matInput formControlName="recipeId" />
      </mat-form-field>

    </div>
    <hr class="me-2" />


    <div class="row align-items-center" style="height: 75px;">

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Parameter Set</mat-label>
          <input matInput formControlName="parameterSet" />
        </mat-form-field>
      </div>

      <div class="col-3" style="margin-bottom: 50px;">
        <mat-label class="me-2">Repetition</mat-label>
        <button mat-icon-button color="primary" aria-label="Decrease" type="button" (click)="decreaseRepetition()">
          <span>-</span>
        </button>

        <span style="
          border: 1px solid #ccc;
          padding: 4px 12px;
          min-width: 40px;
          text-align: center;
          display: inline-block;
          border-radius: 4px;
        ">
          {{ repetitionCount }}
        </span>

        <button mat-icon-button color="primary" aria-label="Increase" type="button" (click)="increaseRepetition()">
          <span>+</span>
        </button>
      </div>

      <div class="col-2" style="margin-bottom: 30px;">
        <mat-checkbox formControlName="reference">Reference</mat-checkbox>
      </div>

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100">
          <mat-label>Additive</mat-label>
          <input matInput formControlName="additive" maxlength="100" type="text" (keypress)="blockNumbers($event)" />
        </mat-form-field>
      </div>
    </div>
    <hr class="me-2">




    <div class="row align-items-center mt-3" style="height: 56px;">
      <div class="col-3" style="margin-bottom: 30px;">

        <div class="d-flex gap-1 align-items-center">
          <label class="form-label d-block mb-1">Pretreatment:</label>
          <mat-checkbox formControlName="pretreatmentNone">None</mat-checkbox>
          <mat-checkbox formControlName="pretreatmentDryTest">Drying</mat-checkbox>
        </div>
      </div>

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Drying Temperature (°C)</mat-label>
          <input type="number" step="0.1" matInput formControlName="dryingTemperature" min="-100" max="300" />
        </mat-form-field>
      </div>

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Drying Time (h)</mat-label>
          <input type="number" step="0.1" min="0" matInput formControlName="dryingTime" min="0" max="24" />
        </mat-form-field>
      </div>


    </div>
    <div class="row align-items-center mt-3" style="height: 56px;">
      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Residual Moisture %</mat-label>
          <input type="number" step="0.1" min="0" max="100" matInput formControlName="residualMoisture" min="0"
            max="100" />
        </mat-form-field>
      </div>
      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Processing Moisture </mat-label>
          <input type="number" step="0.1" min="0" max="100" matInput formControlName="processingMoisture" min="0"
            max="100" />
        </mat-form-field>
      </div>

      <div class="col-2" style="margin-bottom: 40px;">
        <mat-checkbox formControlName="notMeasured">Not Measured</mat-checkbox>
      </div>
    </div>



    <hr class="my-3" />

    <div class="row align-items-center mt-3" style="height: 56px;">

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Plasticizing Volume (cm3)</mat-label>
          <input type="number" step="0.01" min="0" max="999.99" matInput formControlName="plasticizingVolume" />
        </mat-form-field>
      </div>

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Decompression Volume (cm3)</mat-label>
          <input type="number" step="0.01" min="0" matInput formControlName="decompressionVolume" />
        </mat-form-field>
      </div>

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Holding Pressure (bar)</mat-label>
          <input type="number" matInput formControlName="holdingPressure" min="0" max="200" />
        </mat-form-field>
      </div>


    </div>
    <div class="row align-items-center mt-3" style="height: 56px;">

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Switching Point (cm3)</mat-label>
          <input type="number" matInput formControlName="switchingPoint" min="0" max="500" step="0.01" />
        </mat-form-field>
      </div>
    </div>

    <hr class="my-3" />

    <div class="row align-items-center mt-3" style="height: 56px;">

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Screw Speed (m/s)</mat-label>
          <input type="number" min="0" matInput formControlName="screwSpeed" />
        </mat-form-field>
      </div>
      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>(mm/s)</mat-label>
          <input matInput type="number" formControlName="speedMms">
        </mat-form-field>
      </div>
      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Injection Speed (cm3/s)</mat-label>
          <input type="number" matInput formControlName="injectionSpeed" step="0.01" min="0" max="500" />
        </mat-form-field>
      </div>


    </div>
    <div class="row align-items-center mt-3" style="height: 56px;">


      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Injection Pressure (bar)</mat-label>
          <input type="number" matInput formControlName="injectionPressure" min="0" max="2500" />
        </mat-form-field>
      </div>
    </div>

    <hr class="my-3" />


    <div class="row align-items-center mt-3" style="height: 56px;">

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Temperature Zone (°C)</mat-label>
          <input type="number" step="0.1" matInput formControlName="temperatureZone" min="-100" max="300" />
        </mat-form-field>
      </div>

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Melt Temperature (°C)</mat-label>
          <input type="number" step="0.1" matInput formControlName="meltTemperature" min="-100" max="300" />
        </mat-form-field>
      </div>
      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Nozzle Temperature (°C)</mat-label>
          <input type="number" step="0.1" matInput formControlName="nozzleTemperature" min="-100" max="300" />
        </mat-form-field>
      </div>

    </div>

    <div class="row align-items-center mt-3" style="height: 56px;">
      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Nozzle Temperature (°C)</mat-label>
          <input type="number" step="0.1" matInput formControlName="nozzleTemperature" min="-100" max="300" />
        </mat-form-field>
      </div>

      <div class="col-3">
        <mat-form-field appearance="outline" class="w-100" style="width: 90px;">
          <mat-label>Mould Temperature (°C)</mat-label>
          <input type="number" step="0.1" matInput formControlName="mouldTemperature" min="-100" max="300" />
        </mat-form-field>
      </div>
    </div>



    <div mat-dialog-actions align="end">
      <button mat-raised-button color="primary" style="margin-bottom: 25px;" type="submit" (disable)="!injectionForm.invalid" >Update</button>
      <button mat-raised-button type="button" style="margin-bottom: 25px;" (click)="onCancel()">Cancel</button>
    </div>
</form>

